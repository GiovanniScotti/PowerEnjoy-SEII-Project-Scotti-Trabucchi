\subsubsection{Purpose}
This sub-part of the "Use Car" functionality focuses on allowing the user to conclude the current ride and assuring that, after the vehicles were used, they are parked within the Safe Area, properly locked and secured, ready to be rented and reserved again.

\subsubsection{Scenario 1}
Helen is driving a \emph{PowerEnJoy} car in her city with her friend Irina. Once they arrive at their destination within the Safe Area, Helen pulls aside and parks the vehicle. She turns the engine off, and the system recognizes that the car is inside the Safe Area. As Helen gets off the vehicle and closes the door, the system detects that there still are people on board the car and waits before ending the ride. When Irina gets off as well, the system detects that the car is now empty and proceeds to lock the car and stop charging Helen. The system marks the car as available again and Helen's current ride and its relevant data including the final cost are stored by the server.

\subsubsection{Scenario 2}
Lauren is outside the Safe Area, driving a \emph{PowerEnJoy} car. She decides to end her ride, so she finds a spot where it is safe to leave the car. She stops and turns the engine off, but the on-board application warns her that, due to the fact that the car is outside the Safe Area, she is still being charged for the ride. Then, she turns the engine on again and moves towards the Safe Area to find a suitable parking spot.

\subsubsection{Use-case}
A detail of the use-case is provided in Table \ref{end_ride_uc}

\subsubsection{Functional Requirements}
\begin{enumerate}
\item The system must verify that every passenger - driver included - got off the cars before locking them and ending the ride;
\item The system must verify that the engine is turned off before ending the ride;
\item The system must check that the vehicle is stopped within the Safe Area before ending the ride;
\item The system must notify the user he/she didn't park the vehicle within the Safe Area;
\item The system must not allow to end a ride outside the Safe Area;
\item The system must keep charging the user if he/she tries to end the ride outside the Safe Area;
\item The system must stop charging the user as soon as the car is locked;
\item Every time a vehicle becomes "out-of-service" during a ride, the ride ends.
\end{enumerate}

\begin{table}[H]
\begin{center}
\begin{tabular}{p{0.3\textwidth} | p{0.7\textwidth}}
\hline
Actor & User\\
\hline
Goal & Goal 7\\
\hline
Input Condition & The user's ride is in progress.\\
\hline
Event Flow & 
\begin{enumerate}
\item The user stops the vehicle within the Safe Area and parks it, turning the engine off;
\item The system checks that every passenger, driver included, got off the vehicle;
\item The system locks the car;
\item The system stops charging the user.
\end{enumerate} \\
\hline
Output Condition & The car is locked and the ride ends.\\
\hline
Exception & If a user tries to end a ride outside the Safe Area, he/she is notified that he/she is not allowed to and keeps being charged for the ride until he reaches the Safe Area and stops there.

If a user does not turn the car engine off and gets off the car, the ride continues and he/she keeps being charged by the system.\\
\hline
\end{tabular}
\end{center}
\caption{End ride use-case}
\label{end_ride_uc}
\end{table}
